
namespace = mhf_events

# Adolf Hitler 등장 이벤트 예시
mhf_events.1 = {
    type = country_event
    placement = root

    gui_window = event_window_1char_tabloid
    left_icon = scope:adolf_hitler_scope

    on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
    on_opened_soundeffect = "event:/SFX/Events/misc/1Character_Banner"

    icon = "gfx/interface/icons/event_icons/event_scales.dds"

    title = mhf_events.1.t
    desc = mhf_events.1.d
    flavor = mhf_events.1.f

    duration = 3

	trigger = {
		# 예시 트리거: 1923년 11월 8일 이후, 독일, agitator 슬롯 1개 이상
		game_date >= 1923.11.8
		OR = {
			c:GER ?= this
			c:PRU ?= this
		}
		empty_agitator_slots >= 1
	}

    immediate = {
        # 아돌프 히틀러 agitator 생성 및 스코프 부여
        create_character = {
            template = adolf_hitler_character_template
			on_created = {
				place_character_in_void = 3
				add_character_role = politician
				set_variable = hitler_var
			}
            save_scope_as = hitler_scope
        }
		random_character_in_void = {
			limit = {
				has_variable = hitler_var
			}
			save_scope_as = hitler_scope
		}
    }
    option = {
		name = mhf_events.1.a
		default_option = yes
		ai_chance = {
			base = 75
		}
        # 히틀러가 소시민(ig_petty_bourgeoisie) 지도자가 됨
		scope:hitler_scope = {
			free_character_from_void = yes
			set_as_interest_group_leader = yes
    }}
    option = {
		name = mhf_events.1.b
		ai_chance = {
			base = 25
		}
		scope:hitler_scope = {
			kill_character = yes
		}
    }
}

	# 수권법 제정 이벤트
	mhf_events.2 = {
		type = country_event
		placement = root

		gui_window = event_window_1char_tabloid
		left_icon = scope:mhf_enabling_act_country_scope

		on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
		on_opened_soundeffect = "event:/SFX/Events/misc/1Character_Banner"

		icon = "gfx/interface/icons/event_icons/event_scales.dds"

		title = mhf_events.2.t
		desc = mhf_events.2.d
		flavor = mhf_events.2.f

		duration = 3

		trigger = {
			game_date >= 1933.3.23
			OR = {
				c:GER ?= this
				c:PRU ?= this
			}
		}

		immediate = {
			root = {
				save_scope_as = country_scope
			}

			random_scope_character = {
				limit = {
					has_variable = hitler_var
				}
				save_scope_as = hitler_scope
			}
		}

		option = {
			
			name = mhf_events.2.a
			default_option = yes
			ai_chance = { base = 80 }
			scope:country_scope = {
				activate_law = law_type:law_corporate_state
				activate_law = law_type:law_single_party_state	
			}
			add_modifier = {
				name = hitler_legitimacy_boost
				days = 3650
				is_decaying = yes
					}
			add_modifier = { # 현재 전체에 90% 디버프가 걸림 - > 소시민만 제외할 필요 O 아마도 개별로 90% 거는걸 반복해야 할듯 
				name = reduce_all_ig_power_except_petty_bourgeoisie
				days = 3650
				is_decaying = yes
					}
			random_interest_group = {
				ruler = {
					has_variable = hitler_var
				}
				save_scope_as = pb_scope
			}
			pb_scope = {
				remove_modifier = {
					name = reduce_all_ig_power_except_petty_bourgeoisie
				}
			}

			scope:hitler_scope = {
				set_character_as_ruler = yes
			}
		}
		option = {
			name = mhf_events.2.b
			ai_chance = { base = 20 }
			scope:country_scope = {
				add_character_modifier = {
					modifier = failed_power_grab_petty_bourgeoisie
					duration = 3650
					is_decaying = yes 
				}
			}
		}
	}